# ============================================================================
# INVENTORY-BALANCED REBALANCING STRATEGY CONFIGURATION
# ============================================================================
# This file controls the Market-Maker Style rebalancing strategy.
# Edit the values below to tune your bot's behavior.
# Save the file and restart the bot to apply changes.
#
# TIP: Start with conservative values and gradually adjust based on results.
# ============================================================================

# ----------------------------------------------------------------------------
# 1. BANKROLL & ALLOCATION
# ----------------------------------------------------------------------------
bankroll_total: 10000.0
# Total $ you allow the strategy to use (hard cap)
# Example: 8000.0 means the strategy can use up to $8000

target_yes_ratio: 0.5
# Your "neutral" inventory split (between 0 and 1)
# Example: 0.5 = $4000 YES / $4000 NO (balanced)
# Example: 0.6 = $4800 YES / $3200 NO (slightly bullish)

max_skew_ratio: 0.20
# Maximum allowed lean away from target (between 0 and 1)
# Limits how much you can over-commit to one side
# Example: 0.20 with target_yes_ratio=0.5 means max YES=0.70, min YES=0.30

# ----------------------------------------------------------------------------
# 2. REBALANCE TRIGGER (when to trade)
# ----------------------------------------------------------------------------
rebalance_band: 0.005
# How far inventory can drift from target before rebalancing (e.g. 0.02-0.10)
# Bigger band = fewer trades, slower response
# Example: 0.05 with target_yes_ratio=0.5 means rebalance when YES ratio < 0.45 or > 0.55

price_move_threshold: 0.002
# Only rebalance if price moved enough since last action (e.g. 0.005-0.02)
# Prevents tiny "noise" trades when price barely moves
# Example: 0.01 = only trade if price moved by at least 1%

min_seconds_between_rebalances: 1
# Cooldown between adjustments in seconds (e.g. 1-60)
# Reduces churn; too high can miss flips
# Example: 1 = trade every second for fastest price following

# ----------------------------------------------------------------------------
# 3. REBALANCE STRENGTH (how much to trade)
# ----------------------------------------------------------------------------
rebalance_strength_k: 0.8
# How aggressively you push back to target (e.g. 0.1-2.0)
# Higher = faster snap-back, more churn/slippage risk
# Example: 0.8 = move 80% of the way to target in one step

max_rebalance_step_pct: 0.25
# Max % of bankroll you'll move in one rebalance step (e.g. 0.05-0.50)
# Prevents huge single jumps
# Example: 0.25 = move up to 25% of $8000 = $2000 per rebalance

min_trade_size: 0.01
# Minimum trade size in $ (e.g. 0.01-1.00)
# Trades smaller than this are skipped
# Example: 0.01 = allow trades as small as 1 cent

max_trade_size: 35.0
# Hard cap per order in $ (e.g. 10-50)
# Used when price-based sizing is enabled to cap maximum
# Example: 35 = never trade more than $35 per order

# ----------------------------------------------------------------------------
# 3b. MARKET-SPECIFIC TRADE SIZING
# ----------------------------------------------------------------------------
# Different sizing for 1-hour vs 15-minute markets:
#   - 1-hour = conservative (smaller bets, slower)
#   - 15-minute = aggressive (bigger bets, faster)
#
# Formula: trade_size = base + (price × multiplier)
#
# ┌─────────────┬──────────┬────────────┬───────────┬───────────┬─────────────┐
# │ Market Type │ Base ($) │ Multiplier │ Min Trade │ Max Trade │ Cooldown(s) │
# ├─────────────┼──────────┼────────────┼───────────┼───────────┼─────────────┤
# │ 1-Hour      │ $0.50    │ 8.00       │ $0.01     │ $14.00    │ 6 sec       │
# │ 15-Minute   │ $0.25    │ 12.00      │ $0.01     │ $26.00    │ 2 sec       │
# └─────────────┴──────────┴────────────┴───────────┴───────────┴─────────────┘
#
# EXAMPLES:
#   1-Hour @ $0.50:    $0.50 + (0.50 × 8)  = $4.50
#   15-Min @ $0.50:    $0.25 + (0.50 × 12) = $6.25
#
#   1-Hour @ $0.80:    $0.50 + (0.80 × 8)  = $6.90
#   15-Min @ $0.80:    $0.25 + (0.80 × 12) = $9.85

# --- 1-HOUR MARKET SETTINGS ---
# Formula: $1.00 + (price × 12.00), clamped $0.50-$20.00
sizing_1h_base: 1.00
sizing_1h_multiplier: 12.00
sizing_1h_min_trade: 0.50
sizing_1h_max_trade: 20.00
sizing_1h_cooldown_sec: 3

# --- 15-MINUTE MARKET SETTINGS ---
# Formula: $0.50 + (price × 16.00), clamped $0.50-$35.00
sizing_15m_base: 0.50
sizing_15m_multiplier: 16.00
sizing_15m_min_trade: 0.50
sizing_15m_max_trade: 35.00
sizing_15m_cooldown_sec: 1

# ----------------------------------------------------------------------------
# 3c. BELL CURVE SIZING (maximize middle, minimize extremes)
# ----------------------------------------------------------------------------
# Trade more at 0.50 (safest), less at extremes (riskiest)
#
# BELL CURVE TRADE SIZING TABLE:
# ┌──────────┬────────────┬────────────────┬───────────────┐
# │ Price    │ Multiplier │ 15m Trade Size │ 1h Trade Size │
# ├──────────┼────────────┼────────────────┼───────────────┤
# │ 0.10     │ 0.30x      │ $1.87          │ $1.34         │
# │ 0.20     │ 0.54x      │ $3.37          │ $2.43         │
# │ 0.30     │ 0.78x      │ $4.87          │ $3.51         │
# │ 0.40     │ 1.02x      │ $6.37          │ $4.60         │
# │ 0.45     │ 1.26x      │ $7.87          │ $5.68         │
# │ 0.50     │ 1.50x      │ $9.38 ◀ MAX    │ $6.75 ◀ MAX   │
# │ 0.55     │ 1.26x      │ $7.87          │ $5.68         │
# │ 0.60     │ 1.02x      │ $6.37          │ $4.60         │
# │ 0.70     │ 0.78x      │ $4.87          │ $3.51         │
# │ 0.80     │ 0.54x      │ $3.37          │ $2.43         │
# │ 0.90     │ 0.30x      │ $1.87          │ $1.34         │
# └──────────┴────────────┴────────────────┴───────────────┘
#
# Formula: multiplier = extreme + (peak - extreme) × (1 - |price - 0.5| × 2)
#
# WHY THIS WORKS:
#   - 0.50 = Most uncertainty = Both sides equal chance = Safest bet
#   - 0.10/0.90 = One side almost certain = Riskiest to bet against
#   - Larger trades at 0.50 = More profit in balanced markets
#   - Smaller trades at extremes = Protect capital when risky

bell_curve_enabled: true
# Enable bell curve sizing (true/false)
# Trade more at 0.50 (safest), less at extremes (riskiest)

bell_curve_peak_multiplier: 1.75
# Trade size multiplier at price 0.50 (peak)

bell_curve_extreme_multiplier: 0.40
# Trade size multiplier at price 0.10 or 0.90 (extreme)

# ----------------------------------------------------------------------------
# 3d. GABAGOOL22 ASSET ALLOCATION (BTC vs ETH split)
# ----------------------------------------------------------------------------
# 15-min markets: BTC 76%, ETH 24% (3:1 ratio)
# 1-hour markets: BTC 70%, ETH 30% (2.4:1 ratio)

btc_allocation_15m: 0.76
eth_allocation_15m: 0.24
btc_allocation_1h: 0.70
eth_allocation_1h: 0.30

# ----------------------------------------------------------------------------
# 3e. GABAGOOL22 MARKET TIME ALLOCATION (15m vs 1h shifting)
# ----------------------------------------------------------------------------
# As 1-hour market approaches close, shift volume to 15-min markets
#
# | Minutes | 15-min Market | 1-hour Market | Ratio |
# |---------|---------------|---------------|-------|
# | 00-14   | 83.3%         | 16.7%         | 5:1   |
# | 15-29   | 85.7%         | 14.3%         | 6:1   |
# | 30-44   | 87.5%         | 12.5%         | 7:1   |
# | 45-59   | 95.0%         | 5.0%          | 19:1  |

market_time_allocation_enabled: true
# Enable dynamic allocation between 15m and 1h markets based on time

# ----------------------------------------------------------------------------
# 4. PRICE / EXECUTION SAFETY (avoid bad fills)
# ----------------------------------------------------------------------------
slippage_buffer: 0.005
# Extra "worst-case" price padding you assume before trading (e.g. 0.002-0.02)
# Safer but fewer fills
# Example: 0.005 = assume 0.5% worse price when calculating trade size

order_type: "limit"
# Order type: "limit" or "market"
# Limit = safer fills (slower). Market = faster (riskier)
# Recommended: "limit" for safety

limit_price_offset: 0.003
# How far inside/outside mid you place limits (e.g. 0.001-0.01)
# Smaller = better price, slower fills
# Example: 0.003 = place limit orders 0.3% from mid price

max_unfilled_time_sec: 60
# Cancel/replace stale orders after this many seconds (e.g. 10-120)
# Allows quick re-entry when market flips
# Example: 60 = cancel orders that haven't filled in 60 seconds

# ----------------------------------------------------------------------------
# 5. INVENTORY RISK CONTROLS (the "safest" part)
# ----------------------------------------------------------------------------
max_inventory_imbalance_ratio: 1.5
# Limits how lopsided you're allowed to get (e.g. 1.1-2.0)
# Core safety for fast recovery on reversals
# Example: 1.5 = max YES/NO ratio of 1.5:1 (or 1:1.5)

stop_add_threshold: 0.80
# When you approach the imbalance limit, stop adding to heavy side (0-1)
# Expressed as fraction of max_inventory_imbalance_ratio
# Example: 0.80 = stop adding when you reach 80% of max imbalance

reduce_only_mode: false
# If true, once too imbalanced you only trade to reduce risk
# Helps "reclaim small profit" without blowing up
# Options: true or false

# ----------------------------------------------------------------------------
# 6. TILT TRADING (aggressive when one side winning)
# ----------------------------------------------------------------------------
#
# FULL BEHAVIOR TABLE (based on current settings):
#
# ┌────────────┬────────────┬───────────┬────────────┬─────────────────────────┐
# │ UP Price   │ DOWN Price │ UP Trade  │ DOWN Trade │ Behavior                │
# ├────────────┼────────────┼───────────┼────────────┼─────────────────────────┤
# │ 0.05       │ 0.95       │ 0.15x     │ 1.25x      │ DOWN boosted, UP minimal│
# │ 0.10       │ 0.90       │ 0.15x     │ 1.25x      │ DOWN boosted, UP minimal│
# │ 0.15       │ 0.85       │ 0.15x     │ 1.25x      │ DOWN boosted, UP minimal│
# │ 0.20       │ 0.80       │ 0.16x     │ 1.25x      │ DOWN boosted, UP reduced│
# │ 0.30       │ 0.70       │ 0.27x     │ 1.25x      │ DOWN boosted, UP reduced│
# │ 0.40       │ 0.60       │ 0.38x     │ 1.25x      │ DOWN boosted, UP reduced│
# │ 0.41       │ 0.59       │ 0.50x     │ 1.25x      │ Tilt starts (threshold) │
# │ 0.45       │ 0.55       │ 1.0x      │ 1.0x       │ Normal (no tilt)        │
# │ 0.50       │ 0.50       │ 1.0x      │ 1.0x       │ Normal (balanced)       │
# │ 0.55       │ 0.45       │ 1.0x      │ 1.0x       │ Normal (no tilt)        │
# │ 0.59       │ 0.41       │ 1.25x     │ 0.50x      │ Tilt starts (threshold) │
# │ 0.60       │ 0.40       │ 1.25x     │ 0.38x      │ UP boosted, DOWN reduced│
# │ 0.70       │ 0.30       │ 1.25x     │ 0.27x      │ UP boosted, DOWN reduced│
# │ 0.80       │ 0.20       │ 1.25x     │ 0.16x      │ UP boosted, DOWN reduced│
# │ 0.85       │ 0.15       │ 1.25x     │ 0.15x      │ UP boosted, DOWN minimal│
# │ 0.90       │ 0.10       │ 1.25x     │ 0.15x      │ UP boosted, DOWN minimal│
# │ 0.95       │ 0.05       │ 1.25x     │ 0.15x      │ UP boosted, DOWN minimal│
# └────────────┴────────────┴───────────┴────────────┴─────────────────────────┘
#
# KEY (WATCHER-STYLE - NEVER STOPS ONE SIDE):
#   tilt_threshold (0.59)      = When tilt behavior starts
#   tilt_boost_multiplier (1.25x) = How much bigger winning trades are
#   Losing side: progressively reduced from 0.5x → 0.15x (minimum, never 0)
#   ALWAYS trades BOTH sides, just heavily favors cheaper side
#
# Adjust these values to change the table above:

tilt_threshold: 0.59
# When price >= this, boost trades on that side (e.g. 0.55-0.70)

tilt_boost_multiplier: 1.25
# How much to boost winning side trades (e.g. 1.1 = 10%, 1.25 = 25%, 1.5 = 50%)

price_stop_threshold: 0.90
# When price >= this, STOP trading the losing side completely (e.g. 0.85-0.95)

# ----------------------------------------------------------------------------
# 6b. MARKET CLOSE BEHAVIOR (15-minute markets only)
# ----------------------------------------------------------------------------
# Reduce trading activity as market approaches close to avoid getting stuck
#
# BEHAVIOR TABLE:
# ┌────────────┬─────────────────┬────────────┐
# │ Time Left  │ Trade Frequency │ Trade Size │
# ├────────────┼─────────────────┼────────────┤
# │ 5:00+      │ 100%            │ 100%       │
# │ 4:00       │ 25%             │ 100%       │
# │ 3:00       │ 25%             │ 100%       │
# │ 2:00       │ 25%             │ 100%       │
# │ 1:00       │ 25%             │ 60%        │
# │ 0:30       │ 25%             │ 60%        │
# │ 0:10       │ 25%             │ 60%        │
# └────────────┴─────────────────┴────────────┘
#
# Summary:
#   - 4 minutes left → trade 75% less often
#   - 1 minute left → also reduce size by 40%
#   - Never stops → keeps trading until close

close_reduce_activity_minutes: 4
# Start reducing trade frequency at X minutes before close
# GABAGOOL22: Last 4 minutes = 75% fewer trades

close_activity_multiplier: 0.25
# What % of trades to execute in reduced activity mode
# GABAGOOL22: 0.25 = only 25% of trades execute (75% fewer)

close_reduce_size_minutes: 1
# Start reducing trade size at X minutes before close
# GABAGOOL22: Last 1 minute = 40% smaller trades

close_size_multiplier: 0.60
# Multiply trade size by this in reduced size mode
# GABAGOOL22: 0.60 = 40% smaller trade sizes

close_stop_trading_seconds: 0
# Stop trading completely at X seconds before close (0 = never stop)
# GABAGOOL22: Never completely stops until market closes

# ----------------------------------------------------------------------------
# 7. REVERSAL HANDLING (so you can flip 60/40 → 40/60)
# ----------------------------------------------------------------------------
flip_detection_window_sec: 30
# How quickly you decide momentum/price direction changed (e.g. 10-60)
# Example: 30 = look at last 30 seconds of price movement

flip_response_multiplier: 1.5
# Boosts rebalance_strength temporarily after detected flip (e.g. 1.0-3.0)
# Faster recovery after market flips
# Example: 1.5 = use 1.5x normal rebalance strength after flip

post_flip_cooldown_sec: 15
# Short pause after flipping to avoid overreacting twice (e.g. 0-30)
# Example: 15 = wait 15 seconds after flip detection before trading again

# ----------------------------------------------------------------------------
# 8. LOGGING / TUNING HELPERS (so trial & error is easier)
# ----------------------------------------------------------------------------
log_every_trade: true
# Record each action (needed to see why performance differs)
# Options: true or false

metrics_window_trades: 100
# How many recent trades to use when judging "is this setting good?" (e.g. 50-500)
# Example: 100 = analyze last 100 trades for performance metrics

# ----------------------------------------------------------------------------
# 9. MARKET CONFIGURATION
# ----------------------------------------------------------------------------
market_condition_id: ""
# Leave empty to use the first active market, or specify a condition ID
# Example: "0x1234567890abcdef..."
